<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>SEM training using R</title>
    <meta charset="utf-8" />
    <meta name="date" content="2021-08-08" />
    <script src="cfa_sem_presentation_files/header-attrs/header-attrs.js"></script>
    <script src="cfa_sem_presentation_files/clipboard/clipboard.min.js"></script>
    <link href="cfa_sem_presentation_files/shareon/shareon.min.css" rel="stylesheet" />
    <script src="cfa_sem_presentation_files/shareon/shareon.min.js"></script>
    <link href="cfa_sem_presentation_files/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="cfa_sem_presentation_files/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="cfa_sem_presentation_files/tile-view/tile-view.css" rel="stylesheet" />
    <script src="cfa_sem_presentation_files/tile-view/tile-view.js"></script>
    <link href="cfa_sem_presentation_files/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <link href="cfa_sem_presentation_files/animate.css/animate.xaringan.css" rel="stylesheet" />
    <link href="cfa_sem_presentation_files/animate.css-xaringan/animate.fade.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="css/presentation.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# SEM training using R
## <br> Session 2: CFA and SEM
### 08 August 2021

---


layout: true



<style>.shareagain-bar {
--shareagain-foreground: rgb(255, 255, 255);
--shareagain-background: rgba(0, 0, 0, 0.5);
--shareagain-pinterest: none;
--shareagain-pocket: none;
--shareagain-reddit: none;
}</style>



---

## Topic overview

**1**: CFA-SEM overview

**2**: CFA-SEM with Lavaan

**3**: Designing a study to produce empirical results

**4**: Assessing measurement model validity

**5**: Specifying the structural model

**6**: Assessing the structural model validity

---

class: middle center

# CFA-SEM overview
----

---

## What is SEM?

+ Not a one statistical "technique"

+ Integrates a number of different multivariate technique
  + Factor analysis
  + Regression
  + Simultaneous equation
  
+ Distinction between:
  + measurement model
  + structural model

---

## What is SEM?

.leftcol40[

#### Measurement model

+ measurement part of a a full SEM model
+ confirmatory factor analysis
]

.rightcol60[
&lt;img src="img/measurement_part_2.jpg" width="70%" style="display: block; margin: auto;" /&gt;
]

---

## What is SEM?

.leftcol40[

#### Measurement model

+ measurement part of a a full SEM model
+ confirmatory factor analysis

#### Structural model

+ relationship between constucts
+ full sem model is combination of measurement and structural component

]

.rightcol60[
&lt;img src="img/structural_part_2.jpg" width="0%" style="display: block; margin: auto;" /&gt;
]

---

## Basic SEM conventions

&lt;br&gt;
.center[
&lt;img src="img/sem_convention_2.jpg" width="70%" /&gt;
]

---

class: middle center

# 2. CFA-SEM with Lavaan R package
----

---

## What is Lavaan?

.leftcol30[
+ *"developed to provide useRs, researchers, and teachers a free open-source, but commercial quality"*, Yves Rosseel (2012)
]

.rightcol70[

```r
install.packages("lavaan")
library(lavaan)
example(cfa)
```
.code-output-scroll[

```

cfa&gt; ## The famous Holzinger and Swineford (1939) example
cfa&gt; HS.model &lt;- ' visual  =~ x1 + x2 + x3
cfa+               textual =~ x4 + x5 + x6
cfa+               speed   =~ x7 + x8 + x9 '

cfa&gt; fit &lt;- cfa(HS.model, data = HolzingerSwineford1939)

cfa&gt; summary(fit, fit.measures = TRUE)
lavaan 0.6-9 ended normally after 35 iterations

  Estimator                                         ML
  Optimization method                           NLMINB
  Number of model parameters                        21
                                                      
  Number of observations                           301
                                                      
Model Test User Model:
                                                      
  Test statistic                                85.306
  Degrees of freedom                                24
  P-value (Chi-square)                           0.000

Model Test Baseline Model:

  Test statistic                               918.852
  Degrees of freedom                                36
  P-value                                        0.000

User Model versus Baseline Model:

  Comparative Fit Index (CFI)                    0.931
  Tucker-Lewis Index (TLI)                       0.896

Loglikelihood and Information Criteria:

  Loglikelihood user model (H0)              -3737.745
  Loglikelihood unrestricted model (H1)      -3695.092
                                                      
  Akaike (AIC)                                7517.490
  Bayesian (BIC)                              7595.339
  Sample-size adjusted Bayesian (BIC)         7528.739

Root Mean Square Error of Approximation:

  RMSEA                                          0.092
  90 Percent confidence interval - lower         0.071
  90 Percent confidence interval - upper         0.114
  P-value RMSEA &lt;= 0.05                          0.001

Standardized Root Mean Square Residual:

  SRMR                                           0.065

Parameter Estimates:

  Standard errors                             Standard
  Information                                 Expected
  Information saturated (h1) model          Structured

Latent Variables:
                   Estimate  Std.Err  z-value  P(&gt;|z|)
  visual =~                                           
    x1                1.000                           
    x2                0.554    0.100    5.554    0.000
    x3                0.729    0.109    6.685    0.000
  textual =~                                          
    x4                1.000                           
    x5                1.113    0.065   17.014    0.000
    x6                0.926    0.055   16.703    0.000
  speed =~                                            
    x7                1.000                           
    x8                1.180    0.165    7.152    0.000
    x9                1.082    0.151    7.155    0.000

Covariances:
                   Estimate  Std.Err  z-value  P(&gt;|z|)
  visual ~~                                           
    textual           0.408    0.074    5.552    0.000
    speed             0.262    0.056    4.660    0.000
  textual ~~                                          
    speed             0.173    0.049    3.518    0.000

Variances:
                   Estimate  Std.Err  z-value  P(&gt;|z|)
   .x1                0.549    0.114    4.833    0.000
   .x2                1.134    0.102   11.146    0.000
   .x3                0.844    0.091    9.317    0.000
   .x4                0.371    0.048    7.779    0.000
   .x5                0.446    0.058    7.642    0.000
   .x6                0.356    0.043    8.277    0.000
   .x7                0.799    0.081    9.823    0.000
   .x8                0.488    0.074    6.573    0.000
   .x9                0.566    0.071    8.003    0.000
    visual            0.809    0.145    5.564    0.000
    textual           0.979    0.112    8.737    0.000
    speed             0.384    0.086    4.451    0.000
```
]
]

---

## Major operators of lavaan syntax

&lt;br&gt;

.center[
&lt;img src="img/lavaan_syntax.jpg" width="90%" /&gt;

]

---

## Major operators of lavaan syntax

.leftcol40[
#### Defining a reflective latent variable

```r
model &lt;- "F1 =~ x1 + x2 + x3 + x4"
```
&lt;br&gt;
&lt;img src="img/sample_syntax1.png" width="40%" style="display: block; margin: auto;" /&gt;
]

.rightcol[
#### Estimate factor covariance

```r
model &lt;- "F1 =~ x1 + x2 + x3 + x4
          F2 =~ x5 + X6 + x6 + x8
          F1 ~~ F2"
```
&lt;br&gt;
&lt;img src="img/sample_syntax2.png" width="60%" style="display: block; margin: auto;" /&gt;
]

---

## Major operators of lavaan syntax

.leftcol[
#### Estimate regression

```r
model &lt;- "F1 =~ x1 + x2 + x3 + x4
          F2 =~ x5 + X6 + x7 + x8
          F3 =~ x9 + X10 + x11 + x12
          F1 ~~ F2
          F3 ~ F1 + F2"
```
]

.rightcol[
&lt;img src="img/sample_syntax3.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---

## Major operators of lavaan syntax

.leftcol[
#### Insert a comment in the syntax

```r
model &lt;- "F1 =~ x1 + x2 + x3 + x4
          F2 =~ x5 + X6 + x7 + x8
          F3 =~ x9 + X10 + x11 + x12
          
          # covariance
          F1 ~~ F2
          
          # F3 is regressed on F1 and F2
          F3 ~ F1 + F2"
```
]

.rightcol[
&lt;img src="img/sample_syntax3.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---

## Major operators of lavaan syntax

.leftcol[
#### Label a parameter

```r
model &lt;- "F1 =~ x1 + x2 + x3 + x4
          F2 =~ x5 + X6 + x7 + x8
          F3 =~ x9 + X10 + x11 + x12
          
          # covariance
          F1 ~~ F2
          
          # F3 is regressed on F1 and F2
          F3 ~ b1*F1 + b2*F2"
```
]

.rightcol[
&lt;img src="img/sample_syntax4.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---

## Major operators of lavaan syntax

.leftcol[
#### Create a new parameter

```r
model &lt;- "F1 =~ x1 + x2 + x3 + x4
          F2 =~ x5 + X6 + x7 + x8
          F3 =~ x9 + X10 + x11 + x12
          
          # regression
          F3 ~ b1*F1 + b2*F2
          F2 ~ b3*F1

          # F1 indirect effect
          ie := b3*b2

          # F1 total effect
          te := b3*b2 + b1"
```
]

.rightcol[
&lt;img src="img/sample_syntax5.png" width="70%" style="display: block; margin: auto;" /&gt;
]


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
